<html xmlns="http://www.w3.org/1999/xhtml" 
      xml:lang="en" 
	  xmlns:tal="http://xml.zope.org/namespaces/tal" 
	  xmlns:metal="http://xml.zope.org/namespaces/metal" 
	  xmlns:i18n="http://xml.zope.org/namespaces/i18n" 
	  lang="en" 
	  metal:use-macro="here/main_template/macros/master" 
	  i18n:domain="vindula.food">
	  	
    <body>
    	
		<metal:js fill-slot="javascript_head_slot">
		    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
		</metal:js>
		
		<metal:block fill-slot="top_slot">
	        <tal:dummy tal:define="dummy python:request.set('disable_border',1)" />
		</metal:block>
		
        <metal:main fill-slot="content-core">
            <metal:content-core define-macro="content-core">
				<script>
	                var geocoder;
					var map;
					
					function initialize() 
					{
						geocoder = new google.maps.Geocoder();
						var latlng = new google.maps.LatLng(-23.548566,-46.64443);
						var myOptions = 
						{
							zoom: 16,
							center: latlng,
							mapTypeId: google.maps.MapTypeId.ROADMAP
						}
						map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
					}
					
					function codeAddress() {
						var address = document.getElementById("address").value;
						geocoder.geocode( { 'address': address}, function(results, status) {
							
							if (status == google.maps.GeocoderStatus.OK) 
							{
								map.setCenter(results[0].geometry.location);
								var marker = new google.maps.Marker({
								map: map,
								position: results[0].geometry.location
								});
							} 
							
							else 
							{
							    alert("Geocode was not successful for the following reason: " + status);
							}
							
						});
					}
					
					google.maps.event.addDomListener(window, 'load', initialize); 
					google.maps.event.addDomListener(window, 'load', codeAddress);
                </script>
				
				<div id="content" tal:define="restaurant view/get_restaurant | python:{}">
					
                        <h3 tal:content="restaurant/name"></h3>
                        <span tal:content="restaurant/specialty/name"></span><br>
                        <span tal:content="restaurant/address"></span><br>
                        <span tal:content="restaurant/phone_number"></span><br>
                        <tal:cond condition="python: restaurant.delivery == True">Sim</tal:cond><br>
                        <tal:cond condition="python: restaurant.delivery != True">False</tal:cond><br>
                        <span tal:content="restaurant/opening_hours"></span> <br>
                        <input id="address" type="hidden" value="" tal:attributes="value restaurant/address">
                </div>
				
            	<div id="map_canvas" style="width: 500px; height: 500px"></div>
				
            </metal:content-core>
        </metal:main>
    </body>
</html>